(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{48:function(e,t,a){e.exports=a(83)},83:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),s=a.n(o),c=a(19),i=a(5),l=a(4),u=a(42),p=a.n(u),m=a(43),d=a(6),h=a(7),v=a(8),f=a(10),b=a(9),g=a(3),E=a.n(g),y=a(13),O=a(30),w=a(14),j=a.n(w);function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=j.a.get("/api/books?limit=".concat(e,"&skip=").concat(t,"&order=").concat(a)).then((function(e){return n?[].concat(Object(O.a)(n),Object(O.a)(e.data)):e.data}));return{type:"GET_BOOKS",payload:r}}function R(e){return N.apply(this,arguments)}function N(){return(N=Object(y.a)(E.a.mark((function e(t){var a,n,r,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){var e=Object(y.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("/api/getbook?id="+t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(y.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("/api/getReviewer?id="+t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=4,a();case 4:return r=e.sent,e.next=7,n(r.ownerId);case 7:return o=e.sent,e.abrupt("return",{type:"GET_BOOK_W_REVIEWER",payload:{book:r,reviewer:o}});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return{type:"CLEAR_BOOK_W_REVIEWER",payload:{book:{},reviewer:{}}}}function x(e){return _.apply(this,arguments)}function _(){return(_=Object(y.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/getbook?id="+t).then((function(e){return e.data}));case 2:return a=e.sent,e.abrupt("return",{type:"GET_BOOK",payload:a});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return A.apply(this,arguments)}function A(){return(A=Object(y.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/user/login",{email:t,password:a}).then((function(e){return e.data}));case 2:return n=e.sent,e.abrupt("return",{type:"USER_LOGIN",payload:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return W.apply(this,arguments)}function W(){return(W=Object(y.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/auth").then((function(e){return e.data}));case 2:return t=e.sent,e.abrupt("return",{type:"USER_AUTH",payload:t});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,a,n,r,o){return M.apply(this,arguments)}function M(){return(M=Object(y.a)(E.a.mark((function e(t,a,n,r,o,s){var c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/book",{name:t,author:a,review:n,pages:r,rating:o,price:s}).then((function(e){return e.data}));case 2:return c=e.sent,e.abrupt("return",{type:"ADD_REVIEW",payload:c});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return{type:"CLEAR_REVIEW",payload:null}}function T(e){return L.apply(this,arguments)}function L(){return(L=Object(y.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/user_posts?id=".concat(t)).then((function(e){return e.data}));case 2:return a=e.sent,e.abrupt("return",{type:"USER_REVIEWs",payload:a});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,a,n,r,o,s){return P.apply(this,arguments)}function P(){return(P=Object(y.a)(E.a.mark((function e(t,a,n,r,o,s,c){var i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/book_update",{_id:t,name:a,author:n,review:r,pages:o,rating:s,price:c}).then((function(e){return e.data}));case 2:return i=e.sent,e.abrupt("return",{type:"EDIT_REVIEW",payload:i});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return V.apply(this,arguments)}function V(){return(V=Object(y.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.delete("/api/delete_book?id=".concat(t)).then((function(e){return e.data}));case 2:return a=e.sent,e.abrupt("return",{type:"DELETE_REVIEW",payload:a});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return H.apply(this,arguments)}function H(){return(H=Object(y.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/register",t).then((function(e){return e.data}));case 2:return a=e.sent,e.abrupt("return",{type:"ADD_USER",payload:a});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return Y.apply(this,arguments)}function Y(){return(Y=Object(y.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/users").then((function(e){return e.data}));case 2:return t=e.sent,e.abrupt("return",{type:"GET_USER_LIST",payload:t});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return{type:"CLEAR_USER",payload:null}}function z(){return Z.apply(this,arguments)}function Z(){return(Z=Object(y.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/user/logout").then((function(e){return e.data}));case 2:return t=e.sent,e.abrupt("return",{type:"LOGOUT_USER",payload:t});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=function(e){return r.a.createElement("div",{className:"bookInfoContainer"},r.a.createElement(c.b,{to:"/books/".concat(e._id)},r.a.createElement("div",{className:"bookName"},e.name),r.a.createElement("div",{className:"bookAuthor"},e.author),r.a.createElement("div",{className:"bookInfo"},r.a.createElement("div",{className:"price"},r.a.createElement("strong",null,"Price : $ ",e.price)),r.a.createElement("div",{className:"pages"},r.a.createElement("strong",null,"Pages : ",e.pages)),r.a.createElement("div",{className:"rating"},r.a.createElement("strong",null,"Rating : ",e.rating)))))},J=a(84),Q=a(85),X=function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).renderItems=function(e){return e.list?e.list.map((function(e){return r.a.createElement(J.a,{classNames:"book_item",timeout:1e3,key:e._id},r.a.createElement($,e))})):null},e.loadMore=function(){var t=e.props.books.list.length;e.props.dispatch(k(2,t,"desc",e.props.books.list))},e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){this.props.dispatch(k(2,0,"desc"))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Q.a,{component:"div",className:"list"},this.renderItems(this.props.books)),r.a.createElement("div",{className:"loadmore",onClick:this.loadMore},"Load More Books"))}}]),a}(n.Component),ee=Object(i.b)((function(e){return{books:e.books}}))(X),te=function(){return r.a.createElement("div",null,r.a.createElement(ee,null))},ae=a(24),ne=a.n(ae),re=a(44),oe=a.n(re),se=a(1),ce=Object(i.b)((function(e){return{user:e.user}}),(function(e){return Object(se.a)({},Object(l.b)({auth:S},e))}))((function(e){var t=e.user,a=[{type:"navItem",link:"/",icon:"home",text:"Home",authorisedRoute:null},{type:"navItem",link:"/user",icon:"file-text-o",text:"My Profile",authorisedRoute:!0},{type:"navItem",link:"/user/register",icon:"file-text-o",text:"Add User",authorisedRoute:null},{type:"navItem",link:"/user/user-reviews",icon:"file-text-o",text:"My Reviews",authorisedRoute:!0},{type:"navItem",link:"/user/add",icon:"file-text-o",text:"Add Reviews",authorisedRoute:!0},{type:"navItem",link:"/login",icon:"sign-in",text:"Log In",authorisedRoute:!1},{type:"navItem",link:"/user/logout",icon:"sign-out",text:"Log Out",authorisedRoute:!0}];return r.a.createElement("div",null,t.login?a.map((function(e,a){if(t.login.isAuth&&!0===e.authorisedRoute||!t.login.isAuth&&!1===e.authorisedRoute||null===e.authorisedRoute)return function(e,t){return r.a.createElement("div",{className:e.type,key:t},r.a.createElement(c.b,{to:e.link},r.a.createElement(ne.a,{name:e.icon}),e.text))}(e,a)})):null)})),ie=function(e){return r.a.createElement(oe.a,{showNav:e.showNav,onHideNav:e.onHideNav,navStyle:{background:"#242424",maxWidth:"60%"}},r.a.createElement(ce,null))},le=function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showNav:!1},e.onHideNav=function(){e.setState({showNav:!1})},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("header",null,r.a.createElement("div",{className:"open_nav"},r.a.createElement(ne.a,{name:"bars",style:{color:"white",padding:"10px",cursor:"pointer"},onClick:function(){e.setState({showNav:!0})}}),r.a.createElement(ie,{showNav:this.state.showNav,onHideNav:function(){e.onHideNav()}})),r.a.createElement(c.b,{to:"/",className:"logo"},"The Book Shelf"))}}]),a}(n.Component),ue=function(e){return r.a.createElement("div",null,r.a.createElement(le,null),e.children)},pe=function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).renderBook=function(e,t){return r.a.createElement("div",{className:"bookview-wrapper"},r.a.createElement("div",{className:"bookview-wrapper-info"},r.a.createElement("h1",null,e.name),r.a.createElement("h2",null,e.author),r.a.createElement("h3",null,r.a.createElement("strong",null,"Reviewed by : "),t.name+" "+t.lastname)),r.a.createElement("div",{className:"bookview-review"},e.review),r.a.createElement("div",{className:"bookview-stats"},r.a.createElement("div",{className:"features"},r.a.createElement("strong",null,"Pages: "),e.pages,r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("strong",null,"Price: "),e.price)),r.a.createElement("div",{className:"book-rating"},r.a.createElement("div",null,r.a.createElement("strong",null,"Rating"),r.a.createElement("br",null),e.rating," / 5"))))},e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){this.props.getBookWithReviewer(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.props.clearBookWithReviewer()}},{key:"render",value:function(){var e=this.props.book.book?this.props.book.book:null,t=this.props.book.reviewer?this.props.book.reviewer:null;return e&&t?this.renderBook(e,t):r.a.createElement("div",null,"No book found")}}]),a}(n.Component),me=Object(i.b)((function(e){return{book:e.books}}),(function(e){return Object(se.a)({},Object(l.b)({getBookWithReviewer:R,clearBookWithReviewer:I},e))}))(pe),de=function(e){return r.a.createElement("div",null,r.a.createElement(me,e))},he=function(e){return r.a.createElement("div",{className:"form_element"},e.label?r.a.createElement("label",null,e.label):null,r.a.createElement("div",null,function(){switch(e.config.type){case"select":return r.a.createElement("select",{onChange:e.onchange,value:e.value,autoComplete:"on"},e.options.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)})));case"textarea":return r.a.createElement("textarea",{value:e.value,placeholder:e.config.placeholder,onChange:e.onchange,autoComplete:"on"});default:return r.a.createElement("input",Object.assign({},e.config,{value:e.value,onChange:e.onchange,autoComplete:"on"}))}}()),r.a.createElement("div",{className:"errorInput"},e.errorMessage))},ve=function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={email:{errorMessage:"",value:"",validate:!1,config:{type:"email",placeholder:"Enter Email",required:!0}},password:{errorMessage:"",value:"",validate:!1,successMessage:"",config:{type:"password",placeholder:"Enter Password",required:!0}}},e.validate=function(e){return e.errorMessage="",""===e.value?e.errorMessage="Field Required":"email"===e.config.type?RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(e.value)||(e.errorMessage="Not Valid Email"):"password"===e.config.type&&e.value.length<5&&(e.errorMessage="Password too short"),""===e.errorMessage?e.validate=!0:e.validate=!1,e},e.handleInputChange=function(t,a){a.value=t.target.value,a=e.validate(a),e.updateState(a)},e.updateState=function(t){"email"===t.config.type?e.setState({email:Object(se.a)({},t)}):"password"===t.config.type&&e.setState({password:Object(se.a)({},t)})},e.submitForm=function(t){t.preventDefault();var a=!0;Object.entries(e.state).forEach((function(e){e[1].validate||(a=!1)})),a&&e.props.loginUser(e.state.email.value,e.state.password.value)},e}return Object(v.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.user.login.isAuth&&this.props.history.push("/user")}},{key:"renderForm",value:function(){var e=this;return r.a.createElement("div",{className:"rl_container"},r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement("h2",null,"Log in here"),r.a.createElement(he,Object.assign({},this.state.email,{onchange:function(t){return e.handleInputChange(t,e.state.email)}})),r.a.createElement(he,Object.assign({},this.state.password,{onchange:function(t){return e.handleInputChange(t,e.state.password)}})),r.a.createElement("button",{type:"submit"},"Log In"),r.a.createElement("div",{className:"error"},this.props.user.login?r.a.createElement("div",null,this.props.user.login.message):null)))}},{key:"render",value:function(){return this.renderForm()}}]),a}(n.Component),fe=Object(i.b)((function(e){return{user:e.user}}),(function(e){return Object(se.a)({},Object(l.b)({loginUser:C},e))}))(ve),be=function(e,t){var a=function(a){Object(f.a)(o,a);var n=Object(b.a)(o);function o(){var e;Object(h.a)(this,o);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).state={loading:!0},e}return Object(v.a)(o,[{key:"componentWillMount",value:function(){this.props.auth()}},{key:"componentWillReceiveProps",value:function(e){this.setState({loading:!1}),e.user.login.isAuth?!1===t&&this.props.history.push("/user"):t&&this.props.history.push("/login")}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",{className:"loader"}):r.a.createElement(e,Object.assign({},this.props,{user:this.props.user}))}}]),o}(n.Component);return Object(i.b)((function(e){return{user:e.user}}),(function(e){return Object(se.a)({},Object(l.b)({auth:S},e))}))(a)},ge=function(e){var t=e.user.login;return r.a.createElement("div",{className:"user-container"},r.a.createElement("div",{className:"avatar"}),r.a.createElement("div",{className:"info"},r.a.createElement("div",null,r.a.createElement("span",null,"Name: "),t.name),r.a.createElement("div",null,r.a.createElement("span",null,"Last Name: "),t.lastName),r.a.createElement("div",null,r.a.createElement("span",null,"Email: "),t.email)))},Ee=function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:{value:"",config:{type:"text",placeholder:"Enter Name"}},author:{value:"",config:{type:"text",placeholder:"Enter Author"}},review:{value:"",config:{type:"textarea",placeholder:"Enter Review"}},pages:{value:"",config:{type:"number"},label:"Pages:"},rating:{value:"1",config:{type:"select"},options:[1,2,3,4,5],label:"Rating:"},price:{value:"",config:{type:"number"},label:"Price:"},error:""},e.handleInputChange=function(t,a){a.value=t.target.value,e.setState({input:a})},e.submitForm=function(t){t.preventDefault();var a=!0;Object.entries(e.state).forEach((function(e){""===e[1].value&&(a=!1)})),a?e.props.addReview(e.state.name.value,e.state.author.value,e.state.review.value,e.state.pages.value,e.state.rating.value,e.state.price.value):e.setState({error:"All Fields Required"})},e}return Object(v.a)(a,[{key:"componentWillUnmount",value:function(){this.props.clearReview()}},{key:"componentWillReceiveProps",value:function(e){e.review.review.post?this.props.history.push("/books/".concat(e.review.review.bookId)):this.setState({error:"Could Not Upload Book. Try Again"})}},{key:"renderForm",value:function(){var e=this;return r.a.createElement("div",{className:"add-review-form"},r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement(he,Object.assign({},this.state.name,{onchange:function(t){return e.handleInputChange(t,e.state.name)}})),r.a.createElement(he,Object.assign({},this.state.author,{onchange:function(t){return e.handleInputChange(t,e.state.author)}})),r.a.createElement(he,Object.assign({},this.state.review,{onchange:function(t){return e.handleInputChange(t,e.state.review)}})),r.a.createElement("div",{className:"add-review-info"},r.a.createElement(he,Object.assign({},this.state.rating,{onchange:function(t){return e.handleInputChange(t,e.state.rating)}})),r.a.createElement(he,Object.assign({},this.state.pages,{onchange:function(t){return e.handleInputChange(t,e.state.pages)}})),r.a.createElement(he,Object.assign({},this.state.price,{onchange:function(t){return e.handleInputChange(t,e.state.price)}}))),r.a.createElement("button",{type:"submit",className:"add-review-submit"},"Post Review"),r.a.createElement("div",{className:"error"},this.state.error)))}},{key:"render",value:function(){return r.a.createElement("div",{className:"add-review-container"},r.a.createElement("h2",null,"Add Review"),this.renderForm())}}]),a}(n.Component),ye=Object(i.b)((function(e){return{review:e.books}}),(function(e){return Object(se.a)({},Object(l.b)({addReview:D,clearReview:U},e))}))(Ee),Oe=a(45),we=a.n(Oe),je=function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"componentWillMount",value:function(){this.props.getMyReviews(this.props.user.login.id)}},{key:"fillTableWithData",value:function(){return this.props.reviews.user_reviews?this.props.reviews.user_reviews.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("a",{href:"/user/edit-post/".concat(e._id)},e.name)),r.a.createElement("td",null,r.a.createElement("a",{href:"/user/edit-post/".concat(e._id)},e.author)),r.a.createElement("td",null,r.a.createElement("a",{href:"/user/edit-post/".concat(e._id)},r.a.createElement(we.a,{date:e.createdAt,format:"DD/MM/YYYY"}))))})):null}},{key:"render",value:function(){return r.a.createElement("div",{className:"user-reviews-container"},r.a.createElement("h1",null,"Your Reviews"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Date"))),r.a.createElement("tbody",null,this.fillTableWithData())))}}]),a}(n.Component),ke=Object(i.b)((function(e){return{reviews:e.books}}),(function(e){return Object(se.a)({},Object(l.b)({getMyReviews:T},e))}))(je),Re=function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:{value:"",config:{type:"text",placeholder:"Enter Name"}},author:{value:"",config:{type:"text",placeholder:"Enter Author"}},review:{value:"",config:{type:"textarea",placeholder:"Enter Review"}},pages:{value:"",config:{type:"number"},label:"Pages:"},rating:{value:1,config:{type:"select"},options:[1,2,3,4,5],label:"Rating:"},price:{value:"",config:{type:"number"},label:"Price:"},error:"",setInitialBook:!1},e.handleInputChange=function(t,a){a.value=t.target.value,e.setState({input:a})},e.editReview=function(t){t.preventDefault();var a=!0;Object.entries(e.state).forEach((function(e){""===e[1].value&&(a=!1)})),a?e.props.updateReview(e.props.bookData.book._id,e.state.name.value,e.state.author.value,e.state.review.value,e.state.pages.value,e.state.rating.value,e.state.price.value):e.setState({error:"All Fields Required"})},e.deleteReview=function(){e.props.deleteReview(e.props.bookData.book._id)},e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){this.props.getBook(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.props.clearReview()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.state.setInitialBook||this.setState({name:Object(se.a)(Object(se.a)({},this.state.name),{},{value:e.bookData.book.name}),author:Object(se.a)(Object(se.a)({},this.state.author),{},{value:e.bookData.book.author}),review:Object(se.a)(Object(se.a)({},this.state.review),{},{value:e.bookData.book.review}),rating:Object(se.a)(Object(se.a)({},this.state.rating),{},{value:e.bookData.book.rating}),price:Object(se.a)(Object(se.a)({},this.state.price),{},{value:e.bookData.book.price}),pages:Object(se.a)(Object(se.a)({},this.state.pages),{},{value:e.bookData.book.pages}),setInitialBook:!0}),e.bookData.review&&(e.bookData.review.edit?this.props.history.push("/books/".concat(e.bookData.review.bookId)):e.bookData.review.delete?setTimeout((function(){return t.props.history.push("/user/user-reviews")}),2e3):this.setState({error:"Something Went Wrong. Try Again"}))}},{key:"renderForm",value:function(){var e=this;return r.a.createElement("div",{className:"add-review-form-container"},this.props.bookData.review&&this.props.bookData.review.delete?r.a.createElement("div",{className:"del-message"},"Post deleted. Redirecting you...."):null,r.a.createElement("form",{onSubmit:this.editReview},r.a.createElement("h2",null,"Edit Review"),r.a.createElement("div",{className:"form-input-full"},r.a.createElement(he,Object.assign({},this.state.name,{onchange:function(t){return e.handleInputChange(t,e.state.name)}})),r.a.createElement(he,Object.assign({},this.state.author,{onchange:function(t){return e.handleInputChange(t,e.state.author)}}))),r.a.createElement(he,Object.assign({},this.state.review,{onchange:function(t){return e.handleInputChange(t,e.state.review)}})),r.a.createElement("div",{className:"add-book-info"},r.a.createElement("div",{className:"add-rating"},r.a.createElement(he,Object.assign({},this.state.rating,{onchange:function(t){return e.handleInputChange(t,e.state.rating)}}))),r.a.createElement("div",{className:"add-pages"},r.a.createElement(he,Object.assign({},this.state.pages,{onchange:function(t){return e.handleInputChange(t,e.state.pages)}}))),r.a.createElement("div",{className:"add-price"},r.a.createElement(he,Object.assign({},this.state.price,{onchange:function(t){return e.handleInputChange(t,e.state.price)}})))),r.a.createElement("div",{className:"edit-review-buttons"},r.a.createElement("button",{type:"submit",className:"edit-review-submit"},"Edit Review"),r.a.createElement("button",{type:"button",onClick:this.deleteReview,className:"delete-review-submit"},"Delete")),r.a.createElement("div",{className:"error"},this.state.error)))}},{key:"render",value:function(){return this.renderForm()}}]),a}(n.Component),Ne=Object(i.b)((function(e){return{bookData:e.books}}),(function(e){return Object(se.a)({},Object(l.b)({getBook:x,updateReview:B,deleteReview:F,clearReview:U},e))}))(Re),Ie=function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={formdata:{values:{name:"",lastname:"",email:"",password:""},config:{name:{type:"text",placeholder:"Enter Name"},lastname:{type:"text",placeholder:"Enter lastname"},email:{type:"text",placeholder:"Enter email"},password:{type:"password",placeholder:"Enter password"}},error:{name:"",lastname:"",email:"",password:""},valid:{name:!1,lastname:!1,email:!1,password:!1}},successMessage:"",errorMessage:""},e.handleInputChnage=function(t,a){var n=Object(se.a)({},e.state.formdata.values);n[a]=t.target.value;var r=Object(se.a)(Object(se.a)({},e.state.formdata),{},{values:n,error:Object(se.a)({},e.validate(t.target.value,a).errors),valid:Object(se.a)({},e.validate(t.target.value,a).valid)});e.setState({formdata:r})},e.validate=function(t,a){var n=Object(se.a)({},e.state.formdata.error),r=Object(se.a)({},e.state.formdata.valid);return n[a]="","name"===a||"lastname"===a?""===t&&(n[a]="Field cannot be empty."):"email"===a?RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t)||(n[a]="Email not valid."):"password"===a&&t.length<5&&(n[a]="Password too short."),""===n[a]?r[a]=!0:r[a]=!1,{errors:n,valid:r}},e.submitUserDetails=function(t){t.preventDefault(),Object.keys(e.state.formdata.valid).every((function(t){return e.state.formdata.valid[t]}))&&e.props.addUser(e.state.formdata.values)},e.renderForm=function(){return r.a.createElement("div",{className:"add-user-form"},r.a.createElement("form",{onSubmit:e.submitUserDetails},r.a.createElement(he,{config:e.state.formdata.config.name,value:e.state.formdata.values.name,onchange:function(t){return e.handleInputChnage(t,"name")},errorMessage:e.state.formdata.error.name}),r.a.createElement(he,{config:e.state.formdata.config.lastname,value:e.state.formdata.values.lastname,onchange:function(t){return e.handleInputChnage(t,"lastname")},errorMessage:e.state.formdata.error.lastname}),r.a.createElement(he,{config:e.state.formdata.config.email,value:e.state.formdata.values.email,onchange:function(t){return e.handleInputChnage(t,"email")},errorMessage:e.state.formdata.error.email}),r.a.createElement(he,{config:e.state.formdata.config.password,value:e.state.formdata.values.password,onchange:function(t){return e.handleInputChnage(t,"password")},errorMessage:e.state.formdata.error.password}),r.a.createElement("button",{type:"submit"},"Add User")))},e.fillTableWithData=function(){return e.props.userAddInfo.userList?e.props.userAddInfo.userList.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.lastname),r.a.createElement("td",null,e.email))})):null},e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){this.props.getUserlist()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.userAddInfo.user&&(e.userAddInfo.user.success?(this.props.getUserlist(),this.props.clearUser(),this.setState({formdata:Object(se.a)(Object(se.a)({},this.state.formdata),{},{values:{name:"",lastname:"",email:"",password:""}}),successMessage:"User added Successfully",errorMessage:""})):this.setState({errorMessage:e.userAddInfo.user.errorMessage,successMessage:""}),setTimeout((function(){return t.setState({successMessage:"",errorMessage:""})}),3e3))}},{key:"render",value:function(){return r.a.createElement("div",{className:"add-user-wrap"},r.a.createElement("div",{className:"add-user-container"},r.a.createElement(Q.a,{component:"div"},this.state.successMessage?r.a.createElement(J.a,{classNames:"status",timeout:400},r.a.createElement("div",{className:"success-adding"},this.state.successMessage)):null,this.state.errorMessage?r.a.createElement(J.a,{classNames:"status",timeout:400},r.a.createElement("div",{className:"error-adding"},this.state.errorMessage)):null),r.a.createElement("h2",null,"Add User"),this.renderForm()),r.a.createElement("div",{className:"user-list-table"},r.a.createElement("h1",null,"Users List"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Sl.no"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Last Name"),r.a.createElement("th",null,"Email"))),r.a.createElement("tbody",null,this.fillTableWithData()))))}}]),a}(n.Component),xe=Object(i.b)((function(e){return{userAddInfo:e.user}}),(function(e){return Object(se.a)({},Object(l.b)({addUser:G,getUserlist:K,clearUser:q},e))}))(Ie),_e=function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={logout:!1,error:""},e.confirmYes=function(){e.props.logoutUser()},e.confirmNo=function(){e.props.history.push("/")},e}return Object(v.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.logoutInfo.logout.success?(this.setState({logout:!0}),setTimeout((function(){return t.props.history.push("/")}),2500)):this.setState({error:e.logoutInfo.logout.error})}},{key:"render",value:function(){return r.a.createElement("div",{className:"logout-container"},this.state.logout?r.a.createElement("div",{className:"farewell-message"},"Sorry to see you go :\\"):r.a.createElement("div",{className:"confirm-dialouguebox"},r.a.createElement("div",{className:"confirmMessage"},"Do you really want to log out?"),r.a.createElement("div",{className:"confirm-button"},r.a.createElement("button",{className:"confirm-yes",onClick:this.confirmYes},"Yes"),r.a.createElement("button",{className:"confirm-no",onClick:this.confirmNo},"No")),r.a.createElement("div",{className:"error-logout"},this.state.error)))}}]),a}(n.Component),Ce=Object(i.b)((function(e){return{logoutInfo:e.user}}),(function(e){return Object(se.a)({},Object(l.b)({logoutUser:z},e))}))(_e),Ae=function(){return r.a.createElement(ue,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0,component:be(te,null)}),r.a.createElement(d.a,{path:"/books/:id",exact:!0,component:be(de)}),r.a.createElement(d.a,{path:"/login",exact:!0,component:be(fe,!1)}),r.a.createElement(d.a,{path:"/user",exact:!0,component:be(ge,!0)}),r.a.createElement(d.a,{path:"/user/add",exact:!0,component:be(ye,!0)}),r.a.createElement(d.a,{path:"/user/user-reviews",exact:!0,component:be(ke,!0)}),r.a.createElement(d.a,{path:"/user/edit-post/:id",exact:!0,component:be(Ne,!0)}),r.a.createElement(d.a,{path:"/user/register",exact:!0,component:be(xe,null)}),r.a.createElement(d.a,{path:"/user/logout",exact:!0,component:be(Ce,!0)})))},Se=Object(l.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BOOKS":return Object(se.a)(Object(se.a)({},e),{},{list:t.payload});case"GET_BOOK_W_REVIEWER":case"CLEAR_BOOK_W_REVIEWER":return Object(se.a)(Object(se.a)({},e),{},{book:t.payload.book,reviewer:t.payload.reviewer});case"ADD_REVIEW":case"CLEAR_REVIEW":return Object(se.a)(Object(se.a)({},e),{},{review:t.payload});case"USER_REVIEWs":return Object(se.a)(Object(se.a)({},e),{},{user_reviews:t.payload});case"GET_BOOK":return Object(se.a)(Object(se.a)({},e),{},{book:t.payload});case"EDIT_REVIEW":case"DELETE_REVIEW":return Object(se.a)(Object(se.a)({},e),{},{review:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":case"USER_AUTH":return Object(se.a)(Object(se.a)({},e),{},{login:t.payload});case"ADD_USER":return Object(se.a)(Object(se.a)({},e),{},{user:t.payload});case"GET_USER_LIST":return Object(se.a)(Object(se.a)({},e),{},{userList:t.payload});case"CLEAR_USER":return Object(se.a)(Object(se.a)({},e),{},{user:t.payload});case"LOGOUT_USER":return Object(se.a)(Object(se.a)({},e),{},{logout:t.payload});default:return e}}}),We=Object(l.a)(p.a,m.a)(l.d);s.a.render(r.a.createElement(i.a,{store:We(Se)},r.a.createElement(c.a,null,r.a.createElement(Ae,null))),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.8adb9132.chunk.js.map